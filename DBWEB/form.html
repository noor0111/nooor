<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>N & R Salon – Management System</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .form-section {
      margin-bottom: 2rem;
      border-radius: 8px;
    }
    .nav-tabs .nav-link.active {
      font-weight: bold;
      background-color: #f8f9fa;
    }
  </style>
</head>
<body class="bg-light">

  <nav>
    <div id="navbar-container"></div>
    <script>
      fetch('navbar.html')
        .then(response => response.text())
        .then(html => {
          document.getElementById('navbar-container').innerHTML = html;
        });
    </script>
  </nav>

  <div class="container mt-4">
    <h2 class="text-center mb-4">Salon Management System</h2>

    <ul class="nav nav-tabs mb-4" id="managementTabs" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="clients-tab" data-bs-toggle="tab" data-bs-target="#clients" type="button" role="tab">Clients</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="services-tab" data-bs-toggle="tab" data-bs-target="#services" type="button" role="tab">Services</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="staff-tab" data-bs-toggle="tab" data-bs-target="#staff" type="button" role="tab">Staff</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="products-tab" data-bs-toggle="tab" data-bs-target="#products" type="button" role="tab">Products</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="appointments-tab" data-bs-toggle="tab" data-bs-target="#appointments" type="button" role="tab">Appointments</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="payments-tab" data-bs-toggle="tab" data-bs-target="#payments" type="button" role="tab">Payments</button>
      </li>
    </ul>

    <div class="tab-content" id="managementTabsContent">
      <!-- Clients Tab -->
      <div class="tab-pane fade show active" id="clients" role="tabpanel">
        <form id="clientsForm" class="border p-4 rounded bg-white form-section">
          <h4 class="mb-4">Client Management</h4>
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label">Client ID</label>
              <input type="number" id="client_id" class="form-control">
            </div>
            <div class="col-md-3">
              <label class="form-label">First Name*</label>
              <input type="text" id="first_name" class="form-control" required>
            </div>
            <div class="col-md-3">
              <label class="form-label">Last Name*</label>
              <input type="text" id="last_name" class="form-control" required>
            </div>
            <div class="col-md-3">
              <label class="form-label">Phone</label>
              <input type="text" id="phone" class="form-control">
            </div>
            <div class="col-md-6">
              <label class="form-label">Email</label>
              <input type="email" id="email" class="form-control">
            </div>
            <div class="col-md-3">
              <label class="form-label">Birth Date</label>
              <input type="date" id="birth_date" class="form-control">
            </div>
            <div class="col-md-3">
              <label class="form-label">Join Date*</label>
              <input type="date" id="join_date" class="form-control" required>
            </div>
            <div class="col-12">
              <label class="form-label">Notes</label>
              <textarea id="client_notes" rows="2" class="form-control"></textarea>
            </div>
          </div>
          <button class="btn btn-success mt-3" type="submit">Save Client</button>
          <div id="clientsMsg" class="mt-2"></div>
        </form>
      </div>

      <!-- Services Tab -->
      <div class="tab-pane fade" id="services" role="tabpanel">
        <form id="servicesForm" class="border p-4 rounded bg-white form-section">
          <h4 class="mb-4">Service Management</h4>
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label">Service ID</label>
              <input type="number" id="service_id" class="form-control">
            </div>
            <div class="col-md-6">
              <label class="form-label">Service Name*</label>
              <input type="text" id="service_name" class="form-control" required>
            </div>
            <div class="col-md-3">
              <label class="form-label">Category</label>
              <input type="text" id="category" class="form-control">
            </div>
            <div class="col-12">
              <label class="form-label">Description</label>
              <textarea id="description" rows="2" class="form-control"></textarea>
            </div>
            <div class="col-md-3">
              <label class="form-label">Duration (min)*</label>
              <input type="number" id="duration_min" class="form-control" required>
            </div>
            <div class="col-md-3">
              <label class="form-label">Base Price*</label>
              <input type="number" step="0.01" id="base_price" class="form-control" required>
            </div>
            <div class="col-md-3">
              <label class="form-label">Active*</label>
              <select id="active" class="form-select" required>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
              </select>
            </div>
          </div>
          <button class="btn btn-success mt-3" type="submit">Save Service</button>
          <div id="servicesMsg" class="mt-2"></div>
        </form>
      </div>

      <!-- Staff Tab -->
      <div class="tab-pane fade" id="staff" role="tabpanel">
        <form id="staffForm" class="border p-4 rounded bg-white form-section">
          <h4 class="mb-4">Staff Management</h4>
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label">Staff ID</label>
              <input type="number" id="staff_id" class="form-control">
            </div>
            <div class="col-md-3">
              <label class="form-label">First Name*</label>
              <input type="text" id="staff_first_name" class="form-control" required>
            </div>
            <div class="col-md-3">
              <label class="form-label">Last Name*</label>
              <input type="text" id="staff_last_name" class="form-control" required>
            </div>
            <div class="col-md-3">
              <label class="form-label">Phone</label>
              <input type="text" id="staff_phone" class="form-control">
            </div>
            <div class="col-md-6">
              <label class="form-label">Email</label>
              <input type="email" id="staff_email" class="form-control">
            </div>
            <div class="col-md-3">
              <label class="form-label">Hire Date*</label>
              <input type="date" id="hire_date" class="form-control" required>
            </div>
            <div class="col-md-3">
              <label class="form-label">Position</label>
              <input type="text" id="position" class="form-control">
            </div>
            <div class="col-md-3">
              <label class="form-label">Salary</label>
              <input type="number" step="0.01" id="salary" class="form-control">
            </div>
            <div class="col-md-3">
              <label class="form-label">Active*</label>
              <select id="staff_active" class="form-select" required>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
              </select>
            </div>
          </div>
          <button class="btn btn-success mt-3" type="submit">Save Staff</button>
          <div id="staffMsg" class="mt-2"></div>
        </form>
      </div>

      <!-- Products Tab -->
      <div class="tab-pane fade" id="products" role="tabpanel">
        <form id="productsForm" class="border p-4 rounded bg-white form-section">
          <h4 class="mb-4">Product Management</h4>
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label">Product ID</label>
              <input type="number" id="product_id" class="form-control">
            </div>
            <div class="col-md-6">
              <label class="form-label">Product Name*</label>
              <input type="text" id="product_name" class="form-control" required>
            </div>
            <div class="col-md-3">
              <label class="form-label">Brand</label>
              <input type="text" id="brand" class="form-control">
            </div>
            <div class="col-md-3">
              <label class="form-label">Category</label>
              <input type="text" id="product_category" class="form-control">
            </div>
            <div class="col-md-3">
              <label class="form-label">Purchase Price</label>
              <input type="number" step="0.01" id="purchase_price" class="form-control">
            </div>
            <div class="col-md-3">
              <label class="form-label">Retail Price</label>
              <input type="number" step="0.01" id="retail_price" class="form-control">
            </div>
            <div class="col-md-3">
              <label class="form-label">Quantity in Stock</label>
              <input type="number" id="quantity_in_stock" class="form-control">
            </div>
          </div>
          <button class="btn btn-success mt-3" type="submit">Save Product</button>
          <div id="productsMsg" class="mt-2"></div>
        </form>
      </div>

      <div class="tab-content mt-4">
        
      <!-- Appointment Form -->
      <div class="tab-pane fade show active" id="appointments" role="tabpanel">
        <form id="appointmentsForm" class="border p-4 rounded bg-white">
          <h4 class="mb-4">Appointment Scheduling</h4>
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label">Appointment ID</label>
              <input type="number" id="appointment_id" class="form-control" />
            </div>
            <div class="col-md-3">
              <label class="form-label">Client*</label>
              <select id="appt_client_id" class="form-select" required>
                <option value="">Select Client</option>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label">Service*</label>
              <select id="service_id_select" class="form-select" required>
                <option value="">Select Service</option>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label">Staff*</label>
              <select id="staff_id_select" class="form-select" required>
                <option value="">Select Staff</option>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label">Date*</label>
              <input type="date" id="appointment_date" class="form-control" required />
            </div>
            <div class="col-md-3">
              <label class="form-label">Start Time*</label>
              <input type="time" id="start_time" class="form-control" required />
            </div>
            <div class="col-md-3">
              <label class="form-label">End Time*</label>
              <input type="time" id="end_time" class="form-control" required />
            </div>
            <div class="col-md-3">
              <label class="form-label">Status</label>
              <select id="status" class="form-select">
                <option value="Scheduled">Scheduled</option>
                <option value="Completed">Completed</option>
                <option value="Cancelled">Cancelled</option>
              </select>
            </div>
          </div>
          <button class="btn btn-success mt-3" type="submit">Book Appointment</button>
          <div id="appointmentsMsg" class="mt-2"></div>
        </form>
      </div>

      <!-- Payments Tab -->
      <div class="tab-pane fade" id="payments" role="tabpanel">
        <form id="paymentsForm" class="border p-4 rounded bg-white form-section">
          <h4 class="mb-4">Payment Processing</h4>
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label">Payment ID</label>
              <input type="number" id="payment_id" class="form-control">
            </div>
            <div class="col-md-3">
              <label class="form-label">Appointment*</label>
              <select id="payment_appointment_id" class="form-select" required>
                <option value="">Select Appointment</option>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label">Client*</label>
              <select id="payment_client_id" class="form-select" required>
                <option value="">Select Client</option>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label">Payment Date*</label>
              <input type="date" id="payment_date" class="form-control" required>
            </div>
            <div class="col-md-3">
              <label class="form-label">Amount*</label>
              <input type="number" step="0.01" id="payment_amount" class="form-control" required>
            </div>
            <div class="col-md-3">
              <label class="form-label">Payment Method*</label>
              <select id="payment_method" class="form-select" required>
                <option value="Cash">Cash</option>
                <option value="Credit Card">Credit Card</option>
                <option value="Debit Card">Debit Card</option>
                <option value="Bank Transfer">Bank Transfer</option>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label">Tip Amount</label>
              <input type="number" step="0.01" id="tip_amount" class="form-control">
            </div>
          </div>
          <button class="btn btn-success mt-3" type="submit">Record Payment</button>
          <div id="paymentsMsg" class="mt-2"></div>
        </form>
      </div>
    </div>
  </div>

  <script>
    const baseURL = 'https://refactored-fortnight-pj9v94p97jrq3r5vp-6008.app.github.dev';

    // Clients form handler
    document.getElementById('clientsForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const data = {
        client_id: document.getElementById('client_id').value,
        first_name: document.getElementById('first_name').value,
        last_name: document.getElementById('last_name').value,
        phone: document.getElementById('phone').value,
        email: document.getElementById('email').value,
        birth_date: document.getElementById('birth_date').value,
        join_date: document.getElementById('join_date').value,
        client_notes: document.getElementById('client_notes').value
      };
      
      try {
        const res = await fetch(`${baseURL}/clients`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        document.getElementById('clientsMsg').innerText =
          res.ok ? '✅ Client saved successfully!' : '❌ Error saving client';
        if (res.ok) e.target.reset();
      } catch (err) {
        console.error('Error:', err);
        document.getElementById('clientsMsg').innerText = '❌ Network error occurred';
      }
    });

    // Services form handler
    document.getElementById('servicesForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const data = {
        service_id: document.getElementById('service_id').value,
        service_name: document.getElementById('service_name').value,
        description: document.getElementById('description').value,
        duration_min: document.getElementById('duration_min').value,
        base_price: document.getElementById('base_price').value,
        category: document.getElementById('category').value,
        active: document.getElementById('active').value
      };
      
      try {
        const res = await fetch(`${baseURL}/services`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        document.getElementById('servicesMsg').innerText =
          res.ok ? '✅ Service saved successfully!' : '❌ Error saving service';
        if (res.ok) e.target.reset();
      } catch (err) {
        console.error('Error:', err);
        document.getElementById('servicesMsg').innerText = '❌ Network error occurred';
      }
    });

    // Staff form handler
    document.getElementById('staffForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const data = {
        staff_id: document.getElementById('staff_id').value,
        first_name: document.getElementById('staff_first_name').value,
        last_name: document.getElementById('staff_last_name').value,
        phone: document.getElementById('staff_phone').value,
        email: document.getElementById('staff_email').value,
        hire_date: document.getElementById('hire_date').value,
        position: document.getElementById('position').value,
        salary: document.getElementById('salary').value,
        active: document.getElementById('staff_active').value
      };
      
      try {
        const res = await fetch(`${baseURL}/staff`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        document.getElementById('staffMsg').innerText =
          res.ok ? '✅ Staff saved successfully!' : '❌ Error saving staff';
        if (res.ok) e.target.reset();
      } catch (err) {
        console.error('Error:', err);
        document.getElementById('staffMsg').innerText = '❌ Network error occurred';
      }
    });

    // Products form handler
    document.getElementById('productsForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const data = {
        product_id: document.getElementById('product_id').value,
        product_name: document.getElementById('product_name').value,
        brand: document.getElementById('brand').value,
        category: document.getElementById('product_category').value,
        purchase_price: document.getElementById('purchase_price').value,
        retail_price: document.getElementById('retail_price').value,
        quantity_in_stock: document.getElementById('quantity_in_stock').value
      };
      
      try {
        const res = await fetch(`${baseURL}/products`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        document.getElementById('productsMsg').innerText =
          res.ok ? '✅ Product saved successfully!' : '❌ Error saving product';
        if (res.ok) e.target.reset();
      } catch (err) {
        console.error('Error:', err);
        document.getElementById('productsMsg').innerText = '❌ Network error occurred';
      }
    });

    // Appointments form handler
    document.getElementById('appointmentsForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const data = {
        appointment_id: document.getElementById('appointment_id').value,
        client_id: document.getElementById('appt_client_id').value,
        service_id: document.getElementById('service_id_select').value,
        staff_id: document.getElementById('staff_id_select').value,
        appointment_date: document.getElementById('appointment_date').value,
        start_time: document.getElementById('start_time').value,
        end_time: document.getElementById('end_time').value,
        status: document.getElementById('status').value
      };
      
      try {
        const res = await fetch(`${baseURL}/appointments`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        document.getElementById('appointmentsMsg').innerText =
          res.ok ? '✅ Appointment booked successfully!' : '❌ Error booking appointment';
        if (res.ok) e.target.reset();
      } catch (err) {
        console.error('Error:', err);
        document.getElementById('appointmentsMsg').innerText = '❌ Network error occurred';
      }
    });

    // Payments form handler
    document.getElementById('paymentsForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const data = {
        payment_id: document.getElementById('payment_id').value,
        appointment_id: document.getElementById('payment_appointment_id').value,
        client_id: document.getElementById('payment_client_id').value,
        payment_date: document.getElementById('payment_date').value,
        payment_amount: document.getElementById('payment_amount').value,
        payment_method: document.getElementById('payment_method').value,
        tip_amount: document.getElementById('tip_amount').value
      };
      
      try {
        const res = await fetch(`${baseURL}/payments`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        document.getElementById('paymentsMsg').innerText =
          res.ok ? '✅ Payment recorded successfully!' : '❌ Error recording payment';
        if (res.ok) e.target.reset();
      } catch (err) {
        console.error('Error:', err);
        document.getElementById('paymentsMsg').innerText = '❌ Network error occurred';
      }
    });

    // Initialize Bootstrap tooltips
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    tooltipTriggerList.map(function (tooltipTriggerEl) {
      return new bootstrap.Tooltip(tooltipTriggerEl);
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  

</body>
</html>